---
title: "Product Backorder Analysis"
author: "Regan Yee"
date: "March 26, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(plotly)
library(corrplot)

## data = read.csv("./Kaggle_Training_Dataset.csv")
## saveRDS(data, file = "train.RDS")
data = readRDS("./train.RDS")
```

## Data Summary

```{r}
## Get data summary
summary(data)

## Examine the first row of data
head(data,1)
```

---

## Exploratory Data Analysis

#### Correlation Plot


Let's examine the correlation of some of these variables. I suspect that there is high correlation between some variables
since they are measurements for different time periods.

```{r}
## We can only do correlation plots on numeric features so let's only select the numeric features.
M = data[sapply(data, is.numeric)]
## I decided to get rid of the third feature (lead time) since it was full of N/A's
M = M[,-3]

## Plot the correlation plot
corrplot(cor(M), method="color",
         order = "hclust",
         number.cex = 0.7,
         addCoef.col = "black",
         tl.col="black", tl.srt=45)
```

```{r include=FALSE}
## Cleanup temporary variable
rm(M)
```


As expected, we can see the features which are metrics that are measured at different intervals are heavily correlated. This needs to be handled carefully when we build a model; we will probably need to do some feature selection. Interestingly enough, there are also two other features that have high correlations with other features: min_bank (minimum recommended amount to stock) and in_transit_qty (amount of product in transit from source). These two features are correlated with the forecast and sales metrics. It wouldn't be surprising if the forecast numbers are formulated with these features.


#### Visualizations

Cool, so we got to see the correlations of the numerical features. I want to visually inspect the forecast vs. actual sales now.

```{r}
g = ggplot(data, aes(x=forecast_3_month, y=sales_3_month))
p = g + geom_bin2d()

ggplotly(p)
```



